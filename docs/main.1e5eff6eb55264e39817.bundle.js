/*! For license information please see main.1e5eff6eb55264e39817.bundle.js.LICENSE.txt */
(()=>{var e,t={6:(e,t,s)=>{"use strict";var a;s(260);class r extends Phaser.GameObjects.Text{constructor(e){super(e,10,10,"",{color:"#FFF",fontSize:"28px"}),e.add.existing(this),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}!function(e){e.Background="background",e.Enemy="enemy",e.Player="player",e.Treasure="treasure"}(a||(a={}));const n={min:1,max:4};class i extends Phaser.Scene{fpsText;screenWidth;screenHeigth;player;treasure;enemiesGroup;playerSpeed=3;enemySpeed=n;enemyRange={minY:0,maxY:0};releasedButton=!1;endGame=!1;constructor(){super({key:"MainScene"})}create(){this.add.sprite(0,0,a.Background).setOrigin(0,0).setDepth(0),this.fpsText=new r(this).setDepth(100),this.screenWidth=this.sys.game.config.width,this.screenHeigth=this.sys.game.config.height,this.createPlayer(),this.enemyRange.minY=this.screenHeigth/5,this.enemyRange.maxY=this.screenHeigth/1.3,this.enemiesGroup=this.add.group({key:"enemy",repeat:4,setXY:{x:100,y:this.enemyRange.minY,stepX:100,stepY:(this.enemyRange.maxY-this.enemyRange.minY)/5}}),Phaser.Actions.ScaleXY(this.enemiesGroup.getChildren(),-.5),Phaser.Actions.Call(this.enemiesGroup.getChildren(),(e=>{const t=Math.random()<.5?1:-1,s=this.enemySpeed.min+Math.random()*(this.enemySpeed.max-this.enemySpeed.min);var a;e.flipX=!0,e.speed=(a=s,Math.round(100*(a+Number.EPSILON))/100*t)}),this),this.treasure=this.add.sprite(this.screenWidth-80,this.screenHeigth/2,a.Treasure).setScale(.5),this.endGame=!1}createPlayer(){this.player=this.add.sprite(50,this.screenHeigth/2,a.Player),this.player.setScale(.5).setDepth(1)}update(){this.endGame||(this.checkInputs(),this.moveEnemies(),this.checkWinCondition())}moveEnemies(){const e=this.enemiesGroup.getChildren(),t=this.player.getBounds();for(let s=0;s<e.length;s++){e[s].y+=e[s].speed;const a=e[s].getBounds();if(Phaser.Geom.Intersects.RectangleToRectangle(t,a))return this.gameOver();const r=e[s].speed<0&&e[s].y<=this.enemyRange.minY;(e[s].speed>0&&e[s].y>=this.enemyRange.maxY||r)&&(e[s].speed*=-1)}}checkInputs(){this.input.activePointer.isDown&&this.releasedButton?this.player.x+=this.playerSpeed:this.input.activePointer.isDown||(this.releasedButton=!0)}checkWinCondition(){const e=this.player.getBounds(),t=this.treasure.getBounds();Phaser.Geom.Intersects.RectangleToRectangle(e,t)&&this.gameWin()}gameOver(){this.endGame=!0,this.cameras.main.shake(400),this.cameras.main.on("camerashakecomplete",(()=>{this.cameras.main.fade(400)})),this.cameras.main.on("camerafadeoutcomplete",(()=>{this.releasedButton=!1,this.scene.restart()}))}gameWin(){this.releasedButton=!1,this.scene.start("WinScene"),this.scene.pause()}}class o extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image(a.Background,"assets/sprites/background.png"),this.load.image(a.Player,"assets/sprites/player.png"),this.load.image(a.Enemy,"assets/sprites/dragon.png"),this.load.image(a.Treasure,"assets/sprites/treasure.png")}create(){this.scene.start("MainScene")}}class h extends Phaser.Scene{constructor(){super({key:"WinScene"})}isPress;retryText;create(){const e=this.sys.game.config.height,t={color:"#FFF",fontSize:"28px",fontFamily:"sans-serif"};this.add.text(200,e/2,"You Won!!",t).setDepth(1500).setOrigin(0,1),this.add.text(200,e/2+40,"Thanks for playing",t).setDepth(1500).setOrigin(0,1),this.retryText=this.add.text(200,e/2+100,"Tap here to play again",{...t,fontSize:"34px"}).setDepth(1500).setOrigin(0,1).setInteractive({useHandCursor:!0}).on("pointerdown",this.startGame.bind(this)).on("pointerover",(()=>this.retryText.setStyle({fill:"#f39c12"}))).on("pointerout",(()=>this.retryText.setStyle({fill:"#FFF"})))}startGame(){console.info("test"),this.scene.start("MainScene")}}const c={type:Phaser.AUTO,backgroundColor:"#111",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:640,height:360},title:"Super-Dragons-Lair",pixelArt:!0,scene:[o,i,h],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:400}}}};window.addEventListener("load",(()=>{new Phaser.Game(c)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function a(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={exports:{}};return t[e].call(n.exports,n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,s,r,n)=>{if(!s){var i=1/0;for(p=0;p<e.length;p++){for(var[s,r,n]=e[p],o=!0,h=0;h<s.length;h++)(!1&n||i>=n)&&Object.keys(a.O).every((e=>a.O[e](s[h])))?s.splice(h--,1):(o=!1,n<i&&(i=n));if(o){e.splice(p--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[s,r,n]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var r,n,[i,o,h]=s,c=0;if(i.some((t=>0!==e[t]))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(h)var p=h(a)}for(t&&t(s);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(p)},s=self.webpackChunksuper_dragon_lair=self.webpackChunksuper_dragon_lair||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),a.O(void 0,[216],(()=>a(6)));var r=a.O(void 0,[216],(()=>a(204)));r=a.O(r)})();